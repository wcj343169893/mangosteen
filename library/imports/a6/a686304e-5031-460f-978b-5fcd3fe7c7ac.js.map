{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Dustbin.js"],"names":["cc","Class","extends","Component","properties","outPrefab","default","type","Prefab","majiangWidth","majiangHeight","majiangJianxi","initScale","realMjWidth","realMjHeight","lineCount","outMjs","onLoad","start","addNewMj","outmj","push","game","scheduleOnce","console","log","runTime","moveAction","moveTo","getNewPosition","easing","easeOut","action","spawn","scaleTo","node","runAction","pos","getFixedPosition","len","length","line","parseInt","pos2","add","v2","width","height","fixedPosition","highlightMj","mjzz","forEach","value","index","huase","number","highlight","unHighlight","bind","unHighlightMj","takeOut"],"mappings":"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","file":"Dustbin.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["/**\r\n * 垃圾桶，飞进去的效果\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       //打出去的牌\r\n\t\toutPrefab:{\r\n\t\t\tdefault:null,\r\n\t\t\ttype:cc.Prefab\r\n\t\t},\r\n\t\t//单个麻将宽度\r\n\t\tmajiangWidth: 58,\r\n\t\t//单个麻将高度\r\n\t\tmajiangHeight: 84,\r\n\t\t//麻将间隙，适用于所有横的排列\r\n\t\tmajiangJianxi: 4,\r\n\t\t//是否有新牌\r\n\t\t//hasNewMajiang: false,\r\n\t\t//默认缩放，需要和自己的新牌保持一致\r\n\t\tinitScale: 0.5,\r\n\t\t//手里牌列表\r\n\t\t//shouliList: [],\r\n\t\trealMjWidth:0,\r\n\t\trealMjHeight:0,\r\n\t\tlineCount:10,\r\n\t\t//打出去的麻将数组，方便以后高亮显示\r\n\t\toutMjs:[]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () {\r\n     \tthis.realMjWidth=(this.majiangWidth-this.majiangJianxi)*this.initScale;\n     \tthis.realMjHeight=(this.majiangHeight-this.majiangJianxi)*this.initScale;\r\n     },\r\n\r\n    start () {\r\n\r\n    },\r\n    addNewMj:function(outmj){\r\n    \tthis.outMjs.push(outmj);\r\n    \tthis.game.outMjs.push(outmj);\r\n    \tthis.scheduleOnce(function() {\r\n    \t\tconsole.log(\"调整大小\");\r\n    \t\t//outmj.node.setScale(this.initScale);\r\n    \t\t//outmj.node.setPosition(this.getNewPosition());\r\n    \t\tlet runTime=0.5;\r\n    \t\t// 创建一个移动动作\r\n\t\t\tlet moveAction = cc.moveTo(runTime, this.getNewPosition());\r\n\t\t\tmoveAction=moveAction.easing(cc.easeOut(3.0));\r\n\t\t\tlet action = cc.spawn(\r\n\t\t\t\tcc.scaleTo(runTime, this.initScale),\r\n\t\t\t\tmoveAction\r\n\t\t\t);\r\n\t\t\t// 执行动作\r\n\t\t\toutmj.node.runAction(action);\r\n\t\t }, 2);\r\n    },\r\n    //获取一个新位置\r\n    getNewPosition:function(){\r\n    \tlet pos = this.getFixedPosition();\r\n    \tlet len=this.outMjs.length-1;\r\n    \tlet line = parseInt(len/this.lineCount);\r\n    \t\r\n    \tlet pos2 = pos.add(cc.v2((len-line*this.lineCount)*this.realMjWidth,-(line*this.realMjHeight)))\r\n    \t\r\n    \treturn pos2;\r\n    },\r\n    getFixedPosition:function(){\r\n    \t//手里牌宽度，固定后，不会随牌的数量增减而变化\r\n    \tlet width=this.node.width;\r\n    \tlet height=this.node.height;\r\n    \t//console.log(this.node)\r\n    \t//最左边一颗\r\n    \tlet fixedPosition=cc.v2(-(width-this.realMjWidth)/2,(height-this.realMjHeight)/2);\r\n    \treturn fixedPosition;\r\n    },\r\n    //高亮\r\n    highlightMj:function(mjzz){\r\n    \tconsole.log(\"高亮\",mjzz);\r\n    \tthis.game.outMjs.forEach(function(value,index){\r\n    \t\tif(value.huase == mjzz.huase && value.number == mjzz.number){\r\n    \t\t\tvalue.highlight();\r\n    \t\t}else{\r\n    \t\t\tvalue.unHighlight();\r\n    \t\t}\r\n    \t}.bind(this));\r\n    },\r\n    //取消高亮\r\n    unHighlightMj:function(mjzz){\r\n    \tconsole.log(\"取消高亮\",mjzz)\r\n    \tthis.game.outMjs.forEach(function(value,index){\r\n    \t\tif(value.huase == mjzz.huase && value.number == mjzz.number){\r\n    \t\t\tvalue.unHighlight();\r\n    \t\t}\r\n    \t}.bind(this));\r\n    },\r\n    //打出去，从一个位置，飞到另外一个位置\r\n\ttakeOut:function(mjzz,pos,pos2){\r\n\t\t/*let majiang = this.spawnNewOutMj(mjzz);\r\n\t\tmajiang.setPosition(pos);\r\n\t\tthis.node.addChild(majiang);\r\n\t\tthis.scheduleOnce(function() {\r\n\t\t\t//majiang.setPosition(pos2);\r\n\t\t }, 5);*/\r\n\t},\r\n\t\r\n    // update (dt) {},\r\n});\r\n"]}