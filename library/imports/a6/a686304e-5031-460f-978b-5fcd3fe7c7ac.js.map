{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Dustbin.js"],"names":["cc","Class","extends","Component","properties","outPrefab","default","type","Prefab","majiangWidth","majiangHeight","majiangJianxi","initScale","realMjWidth","realMjHeight","lineCount","outMjs","onLoad","start","addNewMj","outmj","push","game","scheduleOnce","console","log","node","setScale","action","moveTo","getNewPosition","runAction","pos","getFixedPosition","len","length","line","parseInt","pos2","add","v2","width","height","fixedPosition","highlightMj","mjzz","forEach","value","index","huase","number","highlight","unHighlight","bind","unHighlightMj","takeOut"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACT;AACLC,mBAAU;AACTC,qBAAQ,IADC;AAETC,kBAAKP,GAAGQ;AAFC,SAFI;AAMd;AACAC,sBAAc,EAPA;AAQd;AACAC,uBAAe,EATD;AAUd;AACAC,uBAAe,CAXD;AAYd;AACA;AACA;AACAC,mBAAW,GAfG;AAgBd;AACA;AACAC,qBAAY,CAlBE;AAmBdC,sBAAa,CAnBC;AAoBdC,mBAAU,EApBI;AAqBd;AACAC,gBAAO;AAtBO,KAHP;;AA4BL;;AAECC,UA9BI,oBA8BM;AACT,aAAKJ,WAAL,GAAiB,CAAC,KAAKJ,YAAL,GAAkB,KAAKE,aAAxB,IAAuC,KAAKC,SAA7D;AACA,aAAKE,YAAL,GAAkB,CAAC,KAAKJ,aAAL,GAAmB,KAAKC,aAAzB,IAAwC,KAAKC,SAA/D;AACA,KAjCG;AAmCLM,SAnCK,mBAmCI,CAER,CArCI;;AAsCLC,cAAS,kBAASC,KAAT,EAAe;AACvB,aAAKJ,MAAL,CAAYK,IAAZ,CAAiBD,KAAjB;AACA,aAAKE,IAAL,CAAUN,MAAV,CAAiBK,IAAjB,CAAsBD,KAAtB;AACA,aAAKG,YAAL,CAAkB,YAAW;AAC5BC,oBAAQC,GAAR,CAAY,MAAZ;AACAL,kBAAMM,IAAN,CAAWC,QAAX,CAAoB,KAAKf,SAAzB;AACA;AACA;AACH,gBAAIgB,SAAS5B,GAAG6B,MAAH,CAAU,GAAV,EAAe,KAAKC,cAAL,EAAf,CAAb;AACA;AACAV,kBAAMM,IAAN,CAAWK,SAAX,CAAqBH,MAArB;AACC,SARC,EAQC,CARD;AASA,KAlDI;AAmDL;AACAE,oBAAe,0BAAU;AACxB,YAAIE,MAAM,KAAKC,gBAAL,EAAV;AACA,YAAIC,MAAI,KAAKlB,MAAL,CAAYmB,MAAZ,GAAmB,CAA3B;AACA,YAAIC,OAAOC,SAASH,MAAI,KAAKnB,SAAlB,CAAX;;AAEA,YAAIuB,OAAON,IAAIO,GAAJ,CAAQvC,GAAGwC,EAAH,CAAM,CAACN,MAAIE,OAAK,KAAKrB,SAAf,IAA0B,KAAKF,WAArC,EAAiD,EAAEuB,OAAK,KAAKtB,YAAZ,CAAjD,CAAR,CAAX;;AAEA,eAAOwB,IAAP;AACA,KA5DI;AA6DLL,sBAAiB,4BAAU;AAC1B;AACA,YAAIQ,QAAM,KAAKf,IAAL,CAAUe,KAApB;AACA,YAAIC,SAAO,KAAKhB,IAAL,CAAUgB,MAArB;AACA;AACA;AACA,YAAIC,gBAAc3C,GAAGwC,EAAH,CAAM,EAAEC,QAAM,KAAK5B,WAAb,IAA0B,CAAhC,EAAkC,CAAC6B,SAAO,KAAK5B,YAAb,IAA2B,CAA7D,CAAlB;AACA,eAAO6B,aAAP;AACA,KArEI;AAsEL;AACAC,iBAAY,qBAASC,IAAT,EAAc;AACzBrB,gBAAQC,GAAR,CAAY,IAAZ,EAAiBoB,IAAjB;AACA,aAAKvB,IAAL,CAAUN,MAAV,CAAiB8B,OAAjB,CAAyB,UAASC,KAAT,EAAeC,KAAf,EAAqB;AAC7C,gBAAGD,MAAME,KAAN,IAAeJ,KAAKI,KAApB,IAA6BF,MAAMG,MAAN,IAAgBL,KAAKK,MAArD,EAA4D;AAC3DH,sBAAMI,SAAN;AACA,aAFD,MAEK;AACJJ,sBAAMK,WAAN;AACA;AACD,SANwB,CAMvBC,IANuB,CAMlB,IANkB,CAAzB;AAOA,KAhFI;AAiFL;AACAC,mBAAc,uBAAST,IAAT,EAAc;AAC3BrB,gBAAQC,GAAR,CAAY,MAAZ,EAAmBoB,IAAnB;AACA,aAAKvB,IAAL,CAAUN,MAAV,CAAiB8B,OAAjB,CAAyB,UAASC,KAAT,EAAeC,KAAf,EAAqB;AAC7C,gBAAGD,MAAME,KAAN,IAAeJ,KAAKI,KAApB,IAA6BF,MAAMG,MAAN,IAAgBL,KAAKK,MAArD,EAA4D;AAC3DH,sBAAMK,WAAN;AACA;AACD,SAJwB,CAIvBC,IAJuB,CAIlB,IAJkB,CAAzB;AAKA,KAzFI;AA0FL;AACHE,aAAQ,iBAASV,IAAT,EAAcb,GAAd,EAAkBM,IAAlB,EAAuB;AAC9B;;;;;;AAMA;;AAEE;AApGK,CAAT","file":"Dustbin.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["/**\r\n * 垃圾桶，飞进去的效果\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       //打出去的牌\r\n\t\toutPrefab:{\r\n\t\t\tdefault:null,\r\n\t\t\ttype:cc.Prefab\r\n\t\t},\r\n\t\t//单个麻将宽度\r\n\t\tmajiangWidth: 58,\r\n\t\t//单个麻将高度\r\n\t\tmajiangHeight: 84,\r\n\t\t//麻将间隙，适用于所有横的排列\r\n\t\tmajiangJianxi: 4,\r\n\t\t//是否有新牌\r\n\t\t//hasNewMajiang: false,\r\n\t\t//默认缩放，需要和自己的新牌保持一致\r\n\t\tinitScale: 0.5,\r\n\t\t//手里牌列表\r\n\t\t//shouliList: [],\r\n\t\trealMjWidth:0,\r\n\t\trealMjHeight:0,\r\n\t\tlineCount:10,\r\n\t\t//打出去的麻将数组，方便以后高亮显示\r\n\t\toutMjs:[]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () {\r\n     \tthis.realMjWidth=(this.majiangWidth-this.majiangJianxi)*this.initScale;\n     \tthis.realMjHeight=(this.majiangHeight-this.majiangJianxi)*this.initScale;\r\n     },\r\n\r\n    start () {\r\n\r\n    },\r\n    addNewMj:function(outmj){\r\n    \tthis.outMjs.push(outmj);\r\n    \tthis.game.outMjs.push(outmj);\r\n    \tthis.scheduleOnce(function() {\r\n    \t\tconsole.log(\"调整大小\");\r\n    \t\toutmj.node.setScale(this.initScale);\r\n    \t\t//outmj.node.setPosition(this.getNewPosition());\r\n    \t\t// 创建一个移动动作\r\n\t\t\tvar action = cc.moveTo(0.5, this.getNewPosition());\r\n\t\t\t// 执行动作\r\n\t\t\toutmj.node.runAction(action);\r\n\t\t }, 2);\r\n    },\r\n    //获取一个新位置\r\n    getNewPosition:function(){\r\n    \tlet pos = this.getFixedPosition();\r\n    \tlet len=this.outMjs.length-1;\r\n    \tlet line = parseInt(len/this.lineCount);\r\n    \t\r\n    \tlet pos2 = pos.add(cc.v2((len-line*this.lineCount)*this.realMjWidth,-(line*this.realMjHeight)))\r\n    \t\r\n    \treturn pos2;\r\n    },\r\n    getFixedPosition:function(){\r\n    \t//手里牌宽度，固定后，不会随牌的数量增减而变化\r\n    \tlet width=this.node.width;\r\n    \tlet height=this.node.height;\r\n    \t//console.log(this.node)\r\n    \t//最左边一颗\r\n    \tlet fixedPosition=cc.v2(-(width-this.realMjWidth)/2,(height-this.realMjHeight)/2);\r\n    \treturn fixedPosition;\r\n    },\r\n    //高亮\r\n    highlightMj:function(mjzz){\r\n    \tconsole.log(\"高亮\",mjzz);\r\n    \tthis.game.outMjs.forEach(function(value,index){\r\n    \t\tif(value.huase == mjzz.huase && value.number == mjzz.number){\r\n    \t\t\tvalue.highlight();\r\n    \t\t}else{\r\n    \t\t\tvalue.unHighlight();\r\n    \t\t}\r\n    \t}.bind(this));\r\n    },\r\n    //取消高亮\r\n    unHighlightMj:function(mjzz){\r\n    \tconsole.log(\"取消高亮\",mjzz)\r\n    \tthis.game.outMjs.forEach(function(value,index){\r\n    \t\tif(value.huase == mjzz.huase && value.number == mjzz.number){\r\n    \t\t\tvalue.unHighlight();\r\n    \t\t}\r\n    \t}.bind(this));\r\n    },\r\n    //打出去，从一个位置，飞到另外一个位置\r\n\ttakeOut:function(mjzz,pos,pos2){\r\n\t\t/*let majiang = this.spawnNewOutMj(mjzz);\r\n\t\tmajiang.setPosition(pos);\r\n\t\tthis.node.addChild(majiang);\r\n\t\tthis.scheduleOnce(function() {\r\n\t\t\t//majiang.setPosition(pos2);\r\n\t\t }, 5);*/\r\n\t},\r\n\t\r\n    // update (dt) {},\r\n});\r\n"]}